<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Maze Munch</title>
  <style>
    :root{
      --purple:#6b6fe8;
      --purpleDark:#4450d6;
      --ink:#2b3352;

      --panel: rgba(255,255,255,.86);
      --panelBorder: rgba(107,111,232,.18);

      --mazeBg:#0c1a33;
      --wall:#4f7dff;
      --wallGlow: rgba(79,125,255,.35);

      --dotGlow: rgba(255,219,138,.18);
      --dotText: rgba(255,219,138,.96);

      --exit:#ff7f9e;
      --pac:#ffe88a;

      --key:#f7fbff;
      --keyBorder:#c9d9ef;
      --keyInk:#2b3352;

      --lit1:#ffe9a8;
      --lit2:#ff9bb0;

      --shadow: 0 12px 32px rgba(22,34,68,.14);
    }

    body{
      margin:0;
      font-family: "Comic Sans MS", system-ui, -apple-system, Segoe UI, Arial, sans-serif;
      color: var(--ink);
      text-align:center;
      overflow-x: hidden;
      background: #f3f7ff;
    }

    /* ===== Forest (Aaron & Friends) background ===== */
    .bg{
      position: fixed;
      inset: 0;
      z-index: -10;
      background-image: url("forest-bg.png");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      filter: saturate(1.05);
    }
    /* Soft glass overlay so text stays readable */
    .bg::after{
      content:"";
      position:absolute;
      inset:0;
      background:
        radial-gradient(circle at 50% 15%, rgba(255,255,255,.55) 0%, rgba(255,255,255,.28) 35%, rgba(255,255,255,.18) 60%, rgba(255,255,255,.08) 100%),
        linear-gradient(180deg, rgba(255,255,255,.28) 0%, rgba(255,255,255,.18) 40%, rgba(255,255,255,.24) 100%);
      backdrop-filter: blur(2px);
    }

    .wrap{ max-width:1280px; margin:0 auto; padding:18px 14px 24px; position:relative; }

    .title{
      margin: 10px auto 6px;
      font-size: clamp(38px, 5.4vw, 64px);
      letter-spacing: 1px;
      color: var(--purple);
      text-shadow: 0 3px 0 rgba(255,255,255,.85);
      font-weight: 900;
    }
    .subtitle{
      margin: 0 0 10px;
      font-size: clamp(14px, 2.2vw, 18px);
      color: var(--purpleDark);
      font-weight: 800;
      line-height: 1.35;
    }

    .card{
      background: var(--panel);
      border: 2px solid rgba(255,255,255,.95);
      border-radius: 18px;
      box-shadow: var(--shadow);
      padding: 14px 14px 16px;
      backdrop-filter: blur(8px);
    }

    .centerBar{ display:flex; justify-content:center; margin: 6px 0 12px; }
    .pill{
      display:inline-flex; align-items:center; justify-content:center;
      padding: 10px 18px;
      border-radius: 999px;
      background: rgba(255,255,255,.92);
      border: 2px solid var(--panelBorder);
      color: var(--purple);
      font-weight: 900;
      font-size: 18px;
      box-shadow: 0 6px 0 rgba(0,0,0,.05);
      min-width: 170px;
    }

    /* ===== SIDE-BY-SIDE LAYOUT (Maze bigger) ===== */
    .stage{
      display:grid;
      grid-template-columns: 1.75fr 1fr; /* maze gets more space */
      gap: 16px;
      align-items:start;
      margin-top: 10px;
    }

    .mazeCol{
      display:flex;
      justify-content:flex-start; /* shift maze left */
    }

    canvas{
      width: 100%;
      max-width: 1060px; /* allow larger */
      min-width: 720px;  /* prevents tiny maze on desktop */
      height: auto;
      border-radius: 18px;
      background: var(--mazeBg);
      box-shadow: 0 14px 32px rgba(0,0,0,.18);
      border: 3px solid rgba(255,255,255,.75);
    }

    /* Instruction between maze & keyboard */
    .help{
      margin: 12px auto 10px;
      padding: 12px 12px;
      border-radius: 16px;
      background: rgba(255,255,255,.92);
      border: 2px solid var(--panelBorder);
      font-weight: 900;
      color: var(--purpleDark);
      line-height: 1.4;
      max-width: 980px;
    }
    .kbd{
      display:inline-block;
      padding: 2px 8px;
      border-radius: 10px;
      background: rgba(107,111,232,.12);
      border: 1px solid rgba(107,111,232,.25);
      font-weight: 900;
      color: var(--purple);
      white-space: nowrap;
    }

    .status{
      font-size: 20px;
      font-weight: 900;
      margin: 10px 0 0;
      min-height: 28px;
      color: var(--purpleDark);
    }

    .btnRow{ display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin-top:12px; }
    button{
      font-size: 18px;
      font-weight: 900;
      padding: 10px 16px;
      border-radius: 14px;
      border: 0;
      cursor:pointer;
      background: #ffe18b;
      box-shadow: 0 6px 0 rgba(0,0,0,.08);
    }
    button:hover{ filter: brightness(0.98); transform: translateY(1px); }
    button:active{ transform: translateY(2px); }

    /* ===== Laptop-like keyboard (right column) ===== */
    .kbdCol{ display:flex; justify-content:flex-end; }

    .keyboard{
      width: 100%;
      max-width: 520px; /* keep keyboard from stretching */
      background: rgba(255,255,255,.82);
      border: 2px solid rgba(255,255,255,.95);
      border-radius: 18px;
      padding: 14px 12px;
      box-shadow: 0 10px 22px rgba(0,0,0,.10);
      position: sticky;
      top: 10px;
    }

    .row{
      display:flex;
      justify-content:center;
      gap: 8px;
      margin: 7px 0;
      flex-wrap: nowrap;
    }

    .key{
      width: 46px;
      height: 46px;
      border-radius: 12px;
      background: var(--key);
      border: 2px solid var(--keyBorder);
      box-shadow: 0 4px 0 rgba(0,0,0,.06);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight: 900;
      color: var(--keyInk);
      user-select:none;
      position:relative;
      padding: 0 6px;
    }
    .key.wide{ width: 76px; }
    .key.xwide{ width: 104px; }
    .key.space{ width: 240px; }
    .key.tiny{ width: 40px; }

    .key.dual{ font-size: 0; }
    .key .top{
      position:absolute; top: 7px; left: 8px;
      font-size: 12px; font-weight: 900; opacity: .92;
    }
    .key .bot{
      position:absolute; bottom: 7px; left: 8px;
      font-size: 12px; font-weight: 900; opacity: .86;
    }
    .key .center{ font-size: 18px; font-weight: 900; }

    .key.lit{
      background: linear-gradient(180deg, var(--lit1), var(--lit2));
      border-color: rgba(255,155,176,.75);
      color: #1b2233;
      box-shadow: 0 0 0 4px rgba(255,155,176,.18), 0 8px 0 rgba(0,0,0,.08);
      transform: translateY(-1px);
    }

    .kbdNote{
      margin-top: 8px;
      font-weight: 900;
      color: var(--purpleDark);
      font-size: 14px;
      opacity: .95;
    }

    /* Responsive: stack */
    @media (max-width: 1100px){
      canvas{ min-width: 0; }
    }
    @media (max-width: 980px){
      .stage{ grid-template-columns: 1fr; }
      .mazeCol{ justify-content:center; }
      .keyboard{ max-width: 980px; position: relative; top: 0; }
    }
  </style>
</head>

<body>
  <div class="bg" aria-hidden="true"></div>

  <div class="wrap">
    <div class="title">Maze Munch</div>
    <div class="subtitle">Play. Practise. Power Up! A fun way to build your typing power at Chongfu School.</div>

    <div class="card">
      <div class="centerBar">
        <div class="pill" id="timePill">Time: 100</div>
      </div>

      <div class="stage">
        <div class="mazeCol">
          <canvas id="c" width="1060" height="620" aria-label="Maze typing game"></canvas>
        </div>

        <div class="kbdCol">
          <div class="keyboard" aria-label="Assisting keyboard">
            <div class="row">
              <div class="key dual tiny" data-key="1" data-shift="!"><span class="top">!</span><span class="bot">1</span></div>
              <div class="key dual tiny" data-key="2" data-shift="@"><span class="top">@</span><span class="bot">2</span></div>
              <div class="key dual tiny" data-key="3" data-shift="#"><span class="top">#</span><span class="bot">3</span></div>
              <div class="key dual tiny" data-key="4" data-shift="$"><span class="top">$</span><span class="bot">4</span></div>
              <div class="key dual tiny" data-key="5" data-shift="%"><span class="top">%</span><span class="bot">5</span></div>
              <div class="key dual tiny" data-key="6" data-shift="^"><span class="top">^</span><span class="bot">6</span></div>
              <div class="key dual tiny" data-key="7" data-shift="&"><span class="top">&</span><span class="bot">7</span></div>
              <div class="key dual tiny" data-key="8" data-shift="*"><span class="top">*</span><span class="bot">8</span></div>
              <div class="key dual tiny" data-key="9" data-shift="("><span class="top">(</span><span class="bot">9</span></div>
              <div class="key dual tiny" data-key="0" data-shift=")"><span class="top">)</span><span class="bot">0</span></div>
              <div class="key dual tiny" data-key="-" data-shift="_"><span class="top">_</span><span class="bot">-</span></div>
              <div class="key dual tiny" data-key="=" data-shift="+"><span class="top">+</span><span class="bot">=</span></div>
              <div class="key xwide" data-key="Backspace"><span class="center">Backspace</span></div>
            </div>

            <div class="row">
              <div class="key wide" data-key="Tab"><span class="center">Tab</span></div>
              <div class="key" data-key="q"><span class="center">Q</span></div>
              <div class="key" data-key="w"><span class="center">W</span></div>
              <div class="key" data-key="e"><span class="center">E</span></div>
              <div class="key" data-key="r"><span class="center">R</span></div>
              <div class="key" data-key="t"><span class="center">T</span></div>
              <div class="key" data-key="y"><span class="center">Y</span></div>
              <div class="key" data-key="u"><span class="center">U</span></div>
              <div class="key" data-key="i"><span class="center">I</span></div>
              <div class="key" data-key="o"><span class="center">O</span></div>
              <div class="key" data-key="p"><span class="center">P</span></div>
              <div class="key dual tiny" data-key="[" data-shift="{"><span class="top">{</span><span class="bot">[</span></div>
              <div class="key dual tiny" data-key="]" data-shift="}"><span class="top">}</span><span class="bot">]</span></div>
            </div>

            <div class="row">
              <div class="key xwide" data-key="CapsLock"><span class="center">Caps</span></div>
              <div class="key" data-key="a"><span class="center">A</span></div>
              <div class="key" data-key="s"><span class="center">S</span></div>
              <div class="key" data-key="d"><span class="center">D</span></div>
              <div class="key" data-key="f"><span class="center">F</span></div>
              <div class="key" data-key="g"><span class="center">G</span></div>
              <div class="key" data-key="h"><span class="center">H</span></div>
              <div class="key" data-key="j"><span class="center">J</span></div>
              <div class="key" data-key="k"><span class="center">K</span></div>
              <div class="key" data-key="l"><span class="center">L</span></div>
              <div class="key dual tiny" data-key=";" data-shift=":"><span class="top">:</span><span class="bot">;</span></div>
              <div class="key dual tiny" data-key="'" data-shift="&quot;"><span class="top">"</span><span class="bot">'</span></div>
              <div class="key xwide" data-key="Enter"><span class="center">Enter</span></div>
            </div>

            <div class="row">
              <div class="key xwide" data-key="Shift"><span class="center">Shift</span></div>
              <div class="key" data-key="z"><span class="center">Z</span></div>
              <div class="key" data-key="x"><span class="center">X</span></div>
              <div class="key" data-key="c"><span class="center">C</span></div>
              <div class="key" data-key="v"><span class="center">V</span></div>
              <div class="key" data-key="b"><span class="center">B</span></div>
              <div class="key" data-key="n"><span class="center">N</span></div>
              <div class="key" data-key="m"><span class="center">M</span></div>
              <div class="key dual tiny" data-key="," data-shift="&lt;"><span class="top">&lt;</span><span class="bot">,</span></div>
              <div class="key dual tiny" data-key="." data-shift="&gt;"><span class="top">&gt;</span><span class="bot">.</span></div>
              <div class="key dual tiny" data-key="/" data-shift="?"><span class="top">?</span><span class="bot">/</span></div>
              <div class="key xwide" data-key="Shift"><span class="center">Shift</span></div>
            </div>

            <div class="row">
              <div class="key wide" data-key="Ctrl"><span class="center">Ctrl</span></div>
              <div class="key wide" data-key="Alt"><span class="center">Alt</span></div>
              <div class="key space" data-key=" "><span class="center">SPACE</span></div>
              <div class="key wide" data-key="Alt"><span class="center">Alt</span></div>
              <div class="key wide" data-key="Ctrl"><span class="center">Ctrl</span></div>
            </div>

            <div class="kbdNote" id="kbdNote">
              Tip: For <span class="kbd">!</span>, <span class="kbd">@</span>, <span class="kbd">_</span>, <span class="kbd">+</span> press <span class="kbd">Shift</span> + key.
            </div>
          </div>
        </div>
      </div>

      <div class="help" id="helpBox">
        âœ… <span class="kbd">Type the letter</span> on a dot <span class="kbd">next to Pac-Man</span> to move and eat it.<br/>
        ðŸŽ¯ Reach the <span class="kbd">RED exit</span> before time runs out!
      </div>

      <div class="status" id="status">Choose Level 1 or Level 2 to begin!</div>

      <div class="btnRow">
        <button id="level1Btn">Level 1 (Letters)</button>
        <button id="level2Btn">Level 2 (Symbols)</button>
      </div>
    </div>
  </div>

<script>
(() => {
  const GRID = [
    "111111111111111111111",
    "1S0000000100000000001",
    "1011111100101111110101",
    "1000000100001000000101",
    "1111100111111011110101",
    "1000100000000010000101",
    "1010111110111110111101",
    "1010000010000010000001",
    "1011111011111011111101",
    "1000001000001000000001",
    "1111101110111011111101",
    "10000000001000000000E1",
    "111111111111111111111"
  ];

  const LEVELS = {
    letters: { time: 100, set: "abcdefghijklmnopqrstuvwxyz" },
    symbols: { time: 150, set: "! . @ , = - _ +".split(" ").join("") } // "!.@,=-_+"
  };

  const shiftMap = { "!":"1", "@":"2", "_":"-", "+":"=" };

  const canvas = document.getElementById("c");
  const ctx = canvas.getContext("2d");

  const timePill = document.getElementById("timePill");
  const statusEl = document.getElementById("status");
  const helpBox  = document.getElementById("helpBox");
  const kbdNote  = document.getElementById("kbdNote");

  const level1Btn = document.getElementById("level1Btn");
  const level2Btn = document.getElementById("level2Btn");

  const keyEls = Array.from(document.querySelectorAll(".key"));

  const rows = GRID.length;
  const cols = GRID[0].length;

  const pad = 16;
  const cell = Math.floor(Math.min(
    (canvas.width - pad*2) / cols,
    (canvas.height - pad*2) / rows
  ));
  const originX = Math.floor((canvas.width - cols*cell) / 2);
  const originY = Math.floor((canvas.height - rows*cell) / 2);

  let running = false;
  let timeLeft = 100;
  let secondTimer = null;

  let mode = "letters";
  let startPos = null;
  let dots = new Map();
  let pr = 0, pc = 0;

  const keyOf = (r,c) => `${r},${c}`;
  const inBounds = (r,c) => r>=0 && r<rows && c>=0 && c<cols;
  const isWall = (r,c) => GRID[r][c] === "1";
  const isStart = (r,c) => GRID[r][c] === "S";
  const isExit  = (r,c) => GRID[r][c] === "E";

  function getCSS(varName){
    return getComputedStyle(document.documentElement).getPropertyValue(varName).trim();
  }

  function clearKeyLights(){
    keyEls.forEach(k => k.classList.remove("lit"));
  }
  function lightKey(match){
    const m = String(match);
    const hits = keyEls.filter(k => k.dataset.key === m || k.dataset.shift === m);
    hits.forEach(h => h.classList.add("lit"));
  }

  function randFrom(set){ return set[Math.floor(Math.random() * set.length)]; }

  function buildDots(){
    const set = LEVELS[mode].set;
    dots = new Map();
    for(let r=0;r<rows;r++){
      for(let c=0;c<cols;c++){
        if (GRID[r][c] === "0"){
          dots.set(keyOf(r,c), randFrom(set));
        }
      }
    }
  }

  function setTime(seconds){
    timeLeft = seconds;
    timePill.textContent = `Time: ${timeLeft}`;
  }

  function startTimer(){
    running = true;
    clearInterval(secondTimer);
    secondTimer = setInterval(() => {
      if (!running) return;
      timeLeft--;
      timePill.textContent = `Time: ${timeLeft}`;
      if (timeLeft <= 0){
        running = false;
        statusEl.textContent = "â° Timeâ€™s up! Choose Level 1 or Level 2 to try again.";
        clearKeyLights();
      }
    }, 1000);
  }

  function resetGame(newMode){
    running = false;
    clearInterval(secondTimer);
    clearKeyLights();

    mode = newMode;

    startPos = null;
    for(let r=0;r<rows;r++){
      for(let c=0;c<cols;c++){
        if (isStart(r,c)) startPos = {r,c};
      }
    }
    pr = startPos.r; pc = startPos.c;

    buildDots();
    setTime(LEVELS[mode].time);

    if (mode === "letters"){
      helpBox.innerHTML =
        `âœ… <span class="kbd">Type the letter</span> on a dot <span class="kbd">next to Pac-Man</span> to move and eat it.<br/>
         ðŸŽ¯ Reach the <span class="kbd">RED exit</span> before time runs out!`;
      statusEl.textContent = "Level 1: Type letters to move!";
      kbdNote.style.display = "none";
    } else {
      helpBox.innerHTML =
        `âœ… <span class="kbd">Type the symbol</span> on a dot <span class="kbd">next to Pac-Man</span> to move and eat it.<br/>
         ðŸŽ¯ Reach the <span class="kbd">RED exit</span> before time runs out!`;
      statusEl.textContent = "Level 2: Type symbols to move!";
      kbdNote.style.display = "block";
    }

    draw();
    updateKeyboardHint();
    startTimer();
  }

  function winGame(){
    running = false;
    clearInterval(secondTimer);
    statusEl.textContent = "ðŸŽ‰ You escaped the maze! Well done!";
    clearKeyLights();
  }

  function adjacentTargets(){
    const dirs = [{dr:-1,dc:0},{dr:1,dc:0},{dr:0,dc:-1},{dr:0,dc:1}];
    const out = [];
    for (const d of dirs){
      const nr = pr + d.dr, nc = pc + d.dc;
      if (!inBounds(nr,nc) || isWall(nr,nc)) continue;
      const k = keyOf(nr,nc);
      if (dots.has(k)) out.push({r:nr,c:nc,ch:dots.get(k)});
      else if (isExit(nr,nc)) out.push({r:nr,c:nc,exit:true});
    }
    return out;
  }

  function updateKeyboardHint(){
    clearKeyLights();
    const adj = adjacentTargets();
    const chars = adj.filter(a => a.ch).map(a => a.ch);

    for (const ch of chars){
      if (shiftMap[ch]){
        lightKey("Shift");
        lightKey(shiftMap[ch]);
      } else {
        lightKey(ch);
      }
    }
  }

  function handleKey(e){
    if (!running) return;

    let pressed = e.key;
    if (!pressed) return;
    if (pressed.length === 1) pressed = pressed.toLowerCase();

    const adj = adjacentTargets();
    const match = adj.find(t => t.ch === pressed);

    if (match){
      pr = match.r; pc = match.c;
      dots.delete(keyOf(pr,pc));
      draw();
      if (isExit(pr,pc)) winGame();
      updateKeyboardHint();
      return;
    }

    // optional: allow "e" to step into exit if adjacent
    const exitAdj = adj.find(a => a.exit);
    if (exitAdj && pressed === "e"){
      pr = exitAdj.r; pc = exitAdj.c;
      draw();
      winGame();
    }
  }

  function cellRect(r,c){
    const x = originX + c*cell;
    const y = originY + r*cell;
    return {x,y,w:cell,h:cell};
  }
  function roundRect(ctx, x, y, w, h, r){
    const rr = Math.min(r, w/2, h/2);
    ctx.beginPath();
    ctx.moveTo(x+rr, y);
    ctx.arcTo(x+w, y, x+w, y+h, rr);
    ctx.arcTo(x+w, y+h, x, y+h, rr);
    ctx.arcTo(x, y+h, x, y, rr);
    ctx.arcTo(x, y, x+w, y, rr);
    ctx.closePath();
  }

  function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle = getCSS("--mazeBg");
    ctx.fillRect(0,0,canvas.width,canvas.height);

    ctx.strokeStyle = "rgba(255,255,255,.22)";
    ctx.lineWidth = 6;
    ctx.strokeRect(8,8,canvas.width-16,canvas.height-16);

    for(let r=0;r<rows;r++){
      for(let c=0;c<cols;c++){
        const {x,y,w,h} = cellRect(r,c);
        const ch = GRID[r][c];

        if (ch === "1"){
          ctx.fillStyle = getCSS("--wallGlow");
          ctx.fillRect(x-1,y-1,w+2,h+2);

          ctx.fillStyle = getCSS("--wall");
          roundRect(ctx, x+2, y+2, w-4, h-4, 8);
          ctx.fill();
        } else {
          ctx.fillStyle = "rgba(255,255,255,.02)";
          ctx.fillRect(x,y,w,h);
        }

        if (ch === "E"){
          ctx.fillStyle = "rgba(255,127,158,.25)";
          roundRect(ctx, x+4, y+4, w-8, h-8, 10); ctx.fill();
          ctx.strokeStyle = "rgba(255,127,158,.9)";
          ctx.lineWidth = 3;
          roundRect(ctx, x+6, y+6, w-12, h-12, 10); ctx.stroke();

          ctx.fillStyle = "rgba(255,255,255,.95)";
          ctx.font = `900 ${Math.floor(cell*0.45)}px Comic Sans MS, Arial`;
          ctx.textAlign = "center"; ctx.textBaseline = "middle";
          ctx.fillText("EXIT", x+w/2, y+h/2);
        }
      }
    }

    ctx.textAlign = "center";
    ctx.textBaseline = "middle";
    ctx.font = `900 ${Math.floor(cell*0.44)}px ui-monospace, Menlo, Consolas, monospace`;

    for (const [k,ch] of dots.entries()){
      const [r,c] = k.split(",").map(Number);
      const {x,y,w,h} = cellRect(r,c);

      ctx.fillStyle = getCSS("--dotGlow");
      ctx.beginPath();
      ctx.arc(x+w/2, y+h/2, Math.max(6, cell*0.28), 0, Math.PI*2);
      ctx.fill();

      ctx.fillStyle = getCSS("--dotText");
      ctx.fillText(String(ch).toUpperCase(), x+w/2, y+h/2);
    }

    drawPacman(pr,pc);
    drawAdjHint();
  }

  function drawPacman(r,c){
    const {x,y,w,h} = cellRect(r,c);
    const cx = x+w/2, cy = y+h/2;
    const radius = Math.max(10, cell*0.38);

    const t = Date.now()/200;
    const mouth = 0.35 + 0.12*Math.abs(Math.sin(t));

    ctx.fillStyle = getCSS("--pac");
    ctx.beginPath();
    ctx.moveTo(cx,cy);
    ctx.arc(cx,cy,radius,mouth,Math.PI*2-mouth,false);
    ctx.closePath();
    ctx.fill();

    ctx.fillStyle = "rgba(0,0,0,.65)";
    ctx.beginPath();
    ctx.arc(cx + radius*0.15, cy - radius*0.35, Math.max(2, radius*0.10), 0, Math.PI*2);
    ctx.fill();
  }

  function drawAdjHint(){
    const adj = adjacentTargets();
    if (!adj.length) return;

    for (const t of adj){
      if (!t.ch) continue;
      const {x,y,w,h} = cellRect(t.r,t.c);
      ctx.strokeStyle = "rgba(255,255,255,.16)";
      ctx.lineWidth = 3;
      roundRect(ctx, x+6, y+6, w-12, h-12, 10);
      ctx.stroke();
    }
  }

  level1Btn.addEventListener("click", () => resetGame("letters"));
  level2Btn.addEventListener("click", () => resetGame("symbols"));
  document.addEventListener("keydown", handleKey);

  // Initial idle screen (no timer running)
  draw();
  clearKeyLights();
  statusEl.textContent = "Choose Level 1 or Level 2 to begin!";
})();
</script>
</body>
</html>
